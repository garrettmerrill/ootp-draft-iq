(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{4884:function(e,t,s){Promise.resolve().then(s.bind(s,8538))},8538:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var a=s(7437),r=s(2265),n=s(998),l=s(1902),i=s(6706),o=s(4817),d=s(1125),c=s(3907),u=s(6127),g=s(2940),x=s(4392),h=s(2421),m=s(9354),p=s(4451),f=s(2513);function b(e){let{playerId:t,tierNames:s,onAdd:n,disabled:l=!1,isInRankings:i=!1}=e,[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),g=(0,r.useRef)(null);async function x(e){u(!0);try{await n(t,e),d(!1)}catch(e){console.error("Failed to add to rankings:",e)}finally{u(!1)}}return((0,r.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),i)?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-greenFlag",children:[(0,a.jsx)("span",{className:"w-4 h-4 rounded-full bg-greenFlag/20 flex items-center justify-center",children:"✓"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Ranked"})]}):(0,a.jsxs)("div",{className:"relative",ref:g,children:[(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),d(!o)},disabled:l||c,className:(0,m.cn)("flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-colors","bg-diamond-100 dark:bg-diamond-900/30 text-diamond-700 dark:text-diamond-400","hover:bg-diamond-200 dark:hover:bg-diamond-900/50","disabled:opacity-50 disabled:cursor-not-allowed"),title:"Add to My Rankings",children:[(0,a.jsx)(f.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Add"}),(0,a.jsx)(h.Z,{className:(0,m.cn)("w-3 h-3 transition-transform",o&&"rotate-180")})]}),o&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 z-50 w-40 rounded-lg shadow-lg border border-dugout-200 dark:border-dugout-700 bg-white dark:bg-dugout-900 py-1 animate-in fade-in slide-in-from-top-2 duration-150",children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-dugout-500 dark:text-dugout-400 font-medium",children:"Add to tier:"}),[1,2,3,4,5].map(e=>(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),x(e)},disabled:c,className:(0,m.cn)("w-full px-3 py-2 text-left text-sm transition-colors","hover:bg-dugout-100 dark:hover:bg-dugout-800","text-dugout-700 dark:text-dugout-300"),children:[e," - ",s[e]||p.si[e]]},e))]})]})}var y=s(208);function v(e){let{playerId:t,isNotInterested:s,onToggle:n}=e,[l,i]=(0,r.useState)(!1);async function o(e){e.stopPropagation(),i(!0);try{await n(t,!s)}catch(e){console.error("Failed to update not interested status:",e)}finally{i(!1)}}return(0,a.jsx)("button",{onClick:o,disabled:l,className:(0,m.cn)("p-1 rounded transition-colors",s?"text-redFlag bg-redFlag/10 hover:bg-redFlag/20":"text-dugout-400 hover:text-dugout-600 dark:hover:text-dugout-300 hover:bg-dugout-100 dark:hover:bg-dugout-800","disabled:opacity-50"),title:s?"Mark as interested":"Not interested",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})}var j=s(7592),k=s(1322),N=s(4697),w=s(5149),S=s(5392),C=s(5554);function P(e){let{tier:t,tierName:s,players:r,overallStartRank:n,isCollapsed:l,onToggleCollapse:i,onRemovePlayer:o,onChangeTier:d,tierNames:c,isDragOver:u=!1,activeId:g}=e,{setNodeRef:x,isOver:p}=(0,w.Zj)({id:"tier-".concat(t),data:{tier:t,type:"tier"}});return(0,a.jsxs)("div",{ref:x,className:(0,m.cn)("rounded-lg border border-dugout-200 dark:border-dugout-700 overflow-hidden transition-all","border-l-4",{1:"border-l-blue-500",2:"border-l-green-500",3:"border-l-yellow-500",4:"border-l-orange-500",5:"border-l-red-500"}[t],(p||u)&&"ring-2 ring-diamond-500 ring-offset-2 dark:ring-offset-dugout-900"),children:[(0,a.jsx)("button",{onClick:i,className:(0,m.cn)("w-full flex items-center justify-between px-4 py-3 text-left transition-colors","hover:bg-dugout-50 dark:hover:bg-dugout-800/50",{1:"bg-blue-500/5",2:"bg-green-500/5",3:"bg-yellow-500/5",4:"bg-orange-500/5",5:"bg-red-500/5"}[t]),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[l?(0,a.jsx)(j.Z,{className:"w-5 h-5 text-dugout-400"}):(0,a.jsx)(h.Z,{className:"w-5 h-5 text-dugout-400"}),(0,a.jsxs)("span",{className:"font-semibold text-dugout-900 dark:text-white",children:["Tier ",t,": ",s]}),(0,a.jsxs)("span",{className:"text-sm text-dugout-500 dark:text-dugout-400",children:["(",r.length," ",1===r.length?"player":"players",")"]})]})}),(p||u)&&g&&(0,a.jsx)("div",{className:"px-4 py-2 bg-diamond-100 dark:bg-diamond-900/30 border-y border-diamond-200 dark:border-diamond-800",children:(0,a.jsxs)("p",{className:"text-sm text-diamond-700 dark:text-diamond-400 text-center",children:["Drop to move to ",s]})}),!l&&(0,a.jsx)(S.Fo,{items:r.map(e=>e.id),strategy:S.qw,children:(0,a.jsx)("div",{className:"divide-y divide-dugout-100 dark:divide-dugout-800",children:0===r.length?(0,a.jsx)("div",{className:"px-4 py-6 text-center text-sm text-dugout-400",children:"No players in this tier"}):r.map((e,s)=>(0,a.jsx)(O,{ranking:e,overallRank:n+s,onRemove:()=>o(e.player.id),onChangeTier:d,tierNames:c,currentTier:t},e.id))})})]})}function O(e){var t;let{ranking:s,overallRank:n,onRemove:l,onChangeTier:i,tierNames:o,currentTier:d}=e,[c,u]=(0,r.useState)(!1),{attributes:g,listeners:x,setNodeRef:h,transform:f,transition:b,isDragging:y}=(0,S.nB)({id:s.id,data:{tier:d,ranking:s}}),v={transform:C.ux.Transform.toString(f),transition:b},j=s.player,w=["SP","RP","CL"].includes(j.position);return(0,a.jsxs)("div",{ref:h,style:v,className:(0,m.cn)("flex items-center gap-3 px-4 py-3 bg-white dark:bg-dugout-900 transition-all",y&&"opacity-50 shadow-lg z-50",j.isDrafted&&"opacity-50"),children:[(0,a.jsx)("button",{...g,...x,className:"cursor-grab active:cursor-grabbing p-1 rounded hover:bg-dugout-100 dark:hover:bg-dugout-800 text-dugout-400",children:(0,a.jsx)(k.Z,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"w-8 text-center",children:(0,a.jsxs)("span",{className:(0,m.cn)("text-sm font-bold",j.isDrafted?"text-dugout-400 line-through":"text-dugout-500"),children:["#",n]})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:(0,m.cn)("font-medium",j.isDrafted?"text-dugout-400 line-through":"text-dugout-900 dark:text-white"),children:j.name}),j.isDrafted&&(0,a.jsxs)("span",{className:"text-xs text-dugout-500 bg-dugout-100 dark:bg-dugout-800 px-2 py-0.5 rounded",children:["Drafted R",j.draftRound," P",j.draftPick,j.draftTeam&&" by ".concat(j.draftTeam)]})]}),(0,a.jsxs)("div",{className:"text-xs text-dugout-500 dark:text-dugout-400",children:[w?"".concat("L"===j.throws?"LHP":"RHP"," (").concat(j.position,")"):j.position," • Age ",j.age," • ",j.highSchoolClass]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-dugout-400",children:"OVR/POT"}),(0,a.jsxs)("div",{className:"font-medium text-dugout-700 dark:text-dugout-300",children:[j.overall,"/",j.potential]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-dugout-400",children:"Score"}),(0,a.jsx)("div",{className:"font-medium text-dugout-700 dark:text-dugout-300",children:null===(t=j.compositeScore)||void 0===t?void 0:t.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>u(!c),className:"px-2 py-1 text-xs rounded border border-dugout-200 dark:border-dugout-700 hover:bg-dugout-50 dark:hover:bg-dugout-800 text-dugout-600 dark:text-dugout-400",children:["Tier ",d]}),c&&(0,a.jsx)("div",{className:"absolute right-0 top-full mt-1 z-50 w-36 rounded-lg shadow-lg border border-dugout-200 dark:border-dugout-700 bg-white dark:bg-dugout-900 py-1",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("button",{onClick:()=>{e!==d&&i(s.id,e),u(!1)},className:(0,m.cn)("w-full px-3 py-1.5 text-left text-sm",e===d?"bg-diamond-100 dark:bg-diamond-900/30 text-diamond-700 dark:text-diamond-400":"hover:bg-dugout-100 dark:hover:bg-dugout-800 text-dugout-700 dark:text-dugout-300"),children:[e," - ",o[e]||p.si[e]]},e))})]}),(0,a.jsx)("button",{onClick:l,className:"p-1 rounded text-dugout-400 hover:text-redFlag hover:bg-redFlag/10 transition-colors",title:"Remove from rankings",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]})}function F(e){let{isOpen:t,onClose:s,tierNames:n,onSave:l}=e,[i,o]=(0,r.useState)(n),[d,c]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{o(n)},[n,t]),!t)return null;async function u(){c(!0);try{await l(i),s()}catch(e){console.error("Failed to save tier names:",e)}finally{c(!1)}}return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-dugout-900 rounded-xl shadow-xl w-full max-w-md mx-4 animate-in zoom-in-95 fade-in duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dugout-200 dark:border-dugout-700",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-dugout-900 dark:text-white",children:"Rename Tiers"}),(0,a.jsx)("button",{onClick:s,className:"p-1 rounded-lg hover:bg-dugout-100 dark:hover:bg-dugout-800 text-dugout-500",children:(0,a.jsx)(N.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"px-6 py-4 space-y-4",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"w-16 text-sm font-medium text-dugout-500 dark:text-dugout-400",children:["Tier ",e]}),(0,a.jsx)("input",{type:"text",value:i[e],onChange:t=>o({...i,[e]:t.target.value}),placeholder:p.si[e],className:"flex-1 input"})]},e))}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-dugout-200 dark:border-dugout-700",children:[(0,a.jsx)("button",{onClick:s,className:"btn-secondary btn-sm",children:"Cancel"}),(0,a.jsx)("button",{onClick:u,disabled:d,className:"btn-primary btn-sm",children:d?"Saving...":"Save Changes"})]})]})]})}var T=s(3274),R=s(1326),D=s(7164);function B(e){let{rankings:t,tierNames:s,onReorder:n,onRemove:l,onChangeTier:i,onUpdateTierNames:o,isLoading:d}=e,[c,u]=(0,r.useState)(!1),[g,x]=(0,r.useState)(new Set),[h,m]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),j=(0,w.Dy)((0,w.VT)(w.we,{activationConstraint:{distance:8}}),(0,w.VT)(w.Lg,{coordinateGetter:S.is})),k={1:[],2:[],3:[],4:[],5:[]},N=[];t.forEach(e=>{if(e.player.isDrafted)N.push(e);else{var t;null===(t=k[e.tier])||void 0===t||t.push(e)}}),Object.values(k).forEach(e=>{e.sort((e,t)=>e.rankInTier-t.rankInTier)});let C=1,O={};[1,2,3,4,5].forEach(e=>{O[e]=C,C+=k[e].length});let B=t.filter(e=>!e.player.isDrafted).length;async function E(e){let t,s;let{active:a,over:r}=e;if(m(null),b(null),!r)return;let l=a.data.current,i=r.data.current;if(!l)return;let o=l.ranking,d=l.tier;if((null==i?void 0:i.type)==="tier")s=k[t=i.tier].length+1;else{if(null==i||!i.ranking)return;let e=i.ranking;t=i.tier,s=e.rankInTier}(d!==t||o.rankInTier!==s)&&await n(o.id,t,s)}async function L(){v(!0);try{let e=await fetch("/api/rankings/export");if(!e.ok)throw Error("Export failed");let t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="statsplus-rankings.csv",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}catch(e){console.error("Export failed:",e),alert("Failed to export rankings")}finally{v(!1)}}let I=h?t.find(e=>e.id===h):null;return d?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(T.Z,{className:"w-8 h-8 animate-spin text-dugout-400"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-dugout-500 dark:text-dugout-400",children:[B," ",1===B?"player":"players"," ranked",N.length>0&&(0,a.jsxs)("span",{className:"text-dugout-400",children:[" • ",N.length," drafted"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>u(!0),className:"btn-secondary btn-sm",children:[(0,a.jsx)(R.Z,{className:"w-4 h-4"}),"Rename Tiers"]}),(0,a.jsxs)("button",{onClick:L,disabled:y||0===B,className:"btn-primary btn-sm",children:[y?(0,a.jsx)(T.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(D.Z,{className:"w-4 h-4"}),"Export CSV"]})]})]}),0===B&&0===N.length?(0,a.jsxs)("div",{className:"card p-8 text-center",children:[(0,a.jsx)("p",{className:"text-dugout-500 dark:text-dugout-400 mb-2",children:"No players in your rankings yet"}),(0,a.jsx)("p",{className:"text-sm text-dugout-400",children:'Switch to "All Players" and click the + button to add players'})]}):(0,a.jsxs)(w.LB,{sensors:j,collisionDetection:w.pE,onDragStart:function(e){m(e.active.id)},onDragOver:function(e){let{over:t}=e;if(t){let e=t.data.current;(null==e?void 0:e.type)==="tier"?b(e.tier):(null==e?void 0:e.tier)?b(e.tier):b(null)}else b(null)},onDragEnd:E,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[[1,2,3,4,5].map(e=>(0,a.jsx)(P,{tier:e,tierName:s[e]||p.si[e],players:k[e],overallStartRank:O[e],isCollapsed:g.has(e),onToggleCollapse:()=>{x(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},onRemovePlayer:l,onChangeTier:i,tierNames:s,isDragOver:f===e,activeId:h},e)),N.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-dugout-200 dark:border-dugout-700 overflow-hidden opacity-60",children:[(0,a.jsx)("div",{className:"px-4 py-3 bg-dugout-100 dark:bg-dugout-800",children:(0,a.jsxs)("span",{className:"font-medium text-dugout-600 dark:text-dugout-400",children:["Drafted (",N.length,") - Not exported"]})}),(0,a.jsx)("div",{className:"divide-y divide-dugout-100 dark:divide-dugout-800",children:N.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-white dark:bg-dugout-900",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-dugout-400 line-through",children:e.player.name}),(0,a.jsxs)("span",{className:"text-xs text-dugout-500",children:[e.player.position," • R",e.player.draftRound," P",e.player.draftPick,e.player.draftTeam&&" by ".concat(e.player.draftTeam)]})]}),(0,a.jsx)("button",{onClick:()=>l(e.player.id),className:"text-xs text-dugout-400 hover:text-redFlag",children:"Remove"})]},e.id))})]})]}),(0,a.jsx)(w.y9,{children:I?(0,a.jsx)("div",{className:"bg-white dark:bg-dugout-800 rounded-lg shadow-xl border border-dugout-200 dark:border-dugout-700 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-medium text-dugout-900 dark:text-white",children:I.player.name}),(0,a.jsxs)("span",{className:"text-sm text-dugout-500",children:[I.player.position," • ",I.player.overall,"/",I.player.potential]})]})}):null})]}),(0,a.jsx)(F,{isOpen:c,onClose:()=>u(!1),tierNames:s,onSave:o})]})}function E(){(0,n.useSession)();let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)([]),[u,g]=(0,r.useState)(p.si),[x,h]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!0),[y,v]=(0,r.useState)(!1),[j,k]=(0,r.useState)(null),[N,w]=(0,r.useState)(0),[S,C]=(0,r.useState)(""),[P,O]=(0,r.useState)(p.MZ),[F,T]=(0,r.useState)(!1),[R]=(0,r.useState)("rank"),[D]=(0,r.useState)("desc"),[E,I]=(0,r.useState)(null),[Z,W]=(0,r.useState)("all");async function A(){if(N>0){alert("⏱️ Please wait ".concat(Math.ceil(N/1e3)," seconds before syncing again."));return}v(!0),k(Date.now());try{let e=await fetch("/api/players/sync-draft",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({statsPlusUrl:"https://statsplus.net/ooobl/api/draftv2/"})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to sync");let[a,r]=await Promise.all([fetch("/api/players"),fetch("/api/rankings")]),n=await a.json(),l=await r.json();n.players&&t(n.players),l.rankings&&c(l.rankings),alert("✅ ".concat(s.message))}catch(e){console.error("Sync error:",e),alert("❌ Failed to sync draft results.")}finally{v(!1)}}(0,r.useEffect)(()=>{if(j){let e=setInterval(()=>{let t=Math.max(0,3e5-(Date.now()-j));w(t),0===t&&clearInterval(e)},1e3);return()=>clearInterval(e)}},[j]),(0,r.useEffect)(()=>{(async function(){try{let e=await fetch("/api/players"),s=await e.json();s.players&&t(s.players)}catch(e){console.error("Failed to fetch players:",e)}finally{h(!1)}})()},[]),(0,r.useEffect)(()=>{(async function(){try{let[e,t]=await Promise.all([fetch("/api/rankings"),fetch("/api/settings/tiers")]),s=await e.json(),a=await t.json();s.rankings&&c(s.rankings),a.tiers&&g(a.tiers)}catch(e){console.error("Failed to fetch rankings:",e)}finally{b(!1)}})()},[]),(0,r.useEffect)(()=>{if(S.length>3){let e=(0,m.Ci)(S);O(t=>({...t,positions:e.positions,minPotential:e.minPotential,maxPotential:e.maxPotential,minOverall:e.minOverall,maxOverall:e.maxOverall,tiers:e.tiers,archetypes:e.archetypes,showDrafted:e.showDrafted,showSleepersOnly:e.showSleepersOnly,showTwoWayOnly:e.showTwoWayOnly,collegeOnly:e.collegeOnly,hsOnly:e.hsOnly,maxDemand:e.maxDemand,searchQuery:S}))}else 0===S.length&&O(e=>({...e,searchQuery:""}))},[S]);let M=(0,r.useMemo)(()=>{let t=[...e];if(P.positions.length>0&&(t=t.filter(e=>P.positions.includes(e.position))),P.minPotential&&(t=t.filter(e=>e.potential>=P.minPotential)),P.maxPotential&&(t=t.filter(e=>e.potential<=P.maxPotential)),P.tiers.length>0&&(t=t.filter(e=>e.tier&&P.tiers.includes(e.tier))),P.showDrafted||(t=t.filter(e=>!e.isDrafted)),P.showNotInterested||(t=t.filter(e=>!e.isNotInterested)),P.showSleepersOnly&&(t=t.filter(e=>e.isSleeper)),P.collegeOnly&&(t=t.filter(e=>{var t;return null===(t=e.highSchoolClass)||void 0===t?void 0:t.includes("CO")})),P.hsOnly&&(t=t.filter(e=>{var t;return null===(t=e.highSchoolClass)||void 0===t?void 0:t.includes("HS")})),P.searchQuery){let e=P.searchQuery.toLowerCase();t=t.filter(t=>{var s;return t.name.toLowerCase().includes(e)||(null===(s=t.nickname)||void 0===s?void 0:s.toLowerCase().includes(e))||t.position.toLowerCase().includes(e)||t.archetypes.some(t=>t.toLowerCase().includes(e))})}return t.sort((e,t)=>{let s=0;switch(R){case"rank":s=(t.compositeScore||0)-(e.compositeScore||0);break;case"name":s=e.name.localeCompare(t.name);break;case"potential":s=t.potential-e.potential;break;case"overall":s=t.overall-e.overall}return"asc"===D?-s:s}),t},[e,P,R,D]),G=(0,r.useCallback)(async(e,s)=>{if(!(await fetch("/api/rankings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:e,tier:s})})).ok)throw Error("Failed to add");let a=await fetch("/api/rankings"),r=await a.json();r.rankings&&c(r.rankings),t(t=>t.map(t=>t.id===e?{...t,ranking:{id:"",tier:s,rankInTier:0}}:t))},[]),H=(0,r.useCallback)(async e=>{await fetch("/api/rankings/".concat(e),{method:"DELETE"}),c(t=>t.filter(t=>t.player.id!==e)),t(t=>t.map(t=>t.id===e?{...t,ranking:null}:t))},[]),V=(0,r.useCallback)(async(e,t,s)=>{await fetch("/api/rankings/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rankingId:e,newTier:t,newRankInTier:s})});let a=await fetch("/api/rankings"),r=await a.json();r.rankings&&c(r.rankings)},[]),U=(0,r.useCallback)(async(e,t)=>{if(!s.find(t=>t.id===e))return;let a=s.filter(e=>e.tier===t&&!e.player.isDrafted).length+1;await V(e,t,a)},[s,V]),z=(0,r.useCallback)(async(e,s)=>{await fetch("/api/players/".concat(e,"/not-interested"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isNotInterested:s})}),t(t=>t.map(t=>t.id===e?{...t,isNotInterested:s,ranking:s?null:t.ranking}:t)),s&&c(t=>t.filter(t=>t.player.id!==e))},[]),_=(0,r.useCallback)(async e=>{await fetch("/api/settings/tiers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tiers:e})}),g(e)},[]),J=s.filter(e=>!e.player.isDrafted).length;return x?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)("div",{className:"spinner"})}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 mx-auto text-dugout-400 mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-dugout-900 dark:text-white",children:"No Players Yet"}),(0,a.jsx)("p",{className:"text-dugout-500 dark:text-dugout-400 mt-2",children:"Upload your CSV data to see your draft board"}),(0,a.jsx)("a",{href:"/dashboard/upload",className:"btn-primary btn-md mt-4 inline-flex",children:"Upload CSV"})]}):(0,a.jsxs)("div",{className:"space-y-0",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-40 bg-dugout-50 dark:bg-dugout-950 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 pb-4 pt-2 border-b border-dugout-200 dark:border-dugout-800",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-dugout-900 dark:text-white",children:"Draft Board"}),(0,a.jsx)("p",{className:"text-dugout-500 dark:text-dugout-400 mt-1",children:"all"===Z?"".concat(M.length," of ").concat(e.length," players"):"".concat(J," players ranked")})]}),(0,a.jsxs)("button",{onClick:A,disabled:y||N>0,className:"btn-secondary btn-sm",children:[(0,a.jsx)(i.Z,{className:(0,m.cn)("w-4 h-4",y&&"animate-spin")}),y?"Syncing...":N>0?"Wait ".concat(Math.ceil(N/1e3),"s"):"Sync Draft"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("button",{onClick:()=>W("all"),className:(0,m.cn)("px-4 py-2 rounded-lg font-medium transition-colors","all"===Z?"bg-diamond-600 text-white":"bg-dugout-100 dark:bg-dugout-800 text-dugout-600 dark:text-dugout-400 hover:bg-dugout-200 dark:hover:bg-dugout-700"),children:"All Players"}),(0,a.jsxs)("button",{onClick:()=>W("rankings"),className:(0,m.cn)("px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2","rankings"===Z?"bg-diamond-600 text-white":"bg-dugout-100 dark:bg-dugout-800 text-dugout-600 dark:text-dugout-400 hover:bg-dugout-200 dark:hover:bg-dugout-700"),children:["My Rankings",J>0&&(0,a.jsx)("span",{className:(0,m.cn)("px-2 py-0.5 text-xs rounded-full","rankings"===Z?"bg-white/20":"bg-diamond-100 dark:bg-diamond-900 text-diamond-700 dark:text-diamond-400"),children:J})]})]}),"all"===Z&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dugout-400"}),(0,a.jsx)("input",{type:"text",value:S,onChange:e=>C(e.target.value),placeholder:'Search or try "available SP with 65+ pot"',className:"input pl-10"})]}),(0,a.jsxs)("button",{onClick:()=>T(!F),className:(0,m.cn)("btn-secondary btn-md",F&&"bg-diamond-100 dark:bg-diamond-900"),children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Filters"]})]}),F&&(0,a.jsxs)("div",{className:"pt-4 border-t border-dugout-200 dark:border-dugout-700 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Positions"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:p.kd.map(e=>(0,a.jsx)("button",{onClick:()=>O(t=>({...t,positions:t.positions.includes(e)?t.positions.filter(t=>t!==e):[...t.positions,e]})),className:(0,m.cn)("px-3 py-1 rounded-full text-sm font-medium transition-colors",P.positions.includes(e)?"bg-diamond-600 text-white":"bg-dugout-100 dark:bg-dugout-800 text-dugout-600 dark:text-dugout-400 hover:bg-dugout-200"),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Tiers"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["Elite","Very Good","Good","Average","Filler"].map(e=>(0,a.jsx)("button",{onClick:()=>O(t=>({...t,tiers:t.tiers.includes(e)?t.tiers.filter(t=>t!==e):[...t.tiers,e]})),className:(0,m.cn)("px-3 py-1 rounded-full text-sm font-medium transition-colors border",P.tiers.includes(e)?(0,m.Dx)(e):"bg-dugout-100 dark:bg-dugout-800 text-dugout-600 dark:text-dugout-400 border-transparent"),children:e},e))})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:P.showSleepersOnly,onChange:e=>O(t=>({...t,showSleepersOnly:e.target.checked})),className:"rounded border-dugout-300"}),(0,a.jsx)("span",{className:"text-sm text-dugout-700 dark:text-dugout-300",children:"Sleepers only"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:P.showDrafted,onChange:e=>O(t=>({...t,showDrafted:e.target.checked})),className:"rounded border-dugout-300"}),(0,a.jsx)("span",{className:"text-sm text-dugout-700 dark:text-dugout-300",children:"Show drafted"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:P.showNotInterested,onChange:e=>O(t=>({...t,showNotInterested:e.target.checked})),className:"rounded border-dugout-300"}),(0,a.jsx)("span",{className:"text-sm text-dugout-700 dark:text-dugout-300",children:"Show not interested"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:P.collegeOnly,onChange:e=>O(t=>({...t,collegeOnly:e.target.checked,hsOnly:!1})),className:"rounded border-dugout-300"}),(0,a.jsx)("span",{className:"text-sm text-dugout-700 dark:text-dugout-300",children:"College only"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:P.hsOnly,onChange:e=>O(t=>({...t,hsOnly:e.target.checked,collegeOnly:!1})),className:"rounded border-dugout-300"}),(0,a.jsx)("span",{className:"text-sm text-dugout-700 dark:text-dugout-300",children:"HS only"})]})]}),(0,a.jsx)("button",{onClick:()=>{O(p.MZ),C("")},className:"text-sm text-diamond-600 hover:text-diamond-700",children:"Clear all filters"})]})]})]}),(0,a.jsx)("div",{className:"pt-6",children:"all"===Z?(0,a.jsxs)("div",{className:"space-y-4",children:[M.map((e,t)=>(0,a.jsx)(L,{player:e,rank:t+1,isExpanded:E===e.id,onToggle:()=>I(E===e.id?null:e.id),tierNames:u,onAddToRankings:G,onToggleNotInterested:z},e.id)),0===M.length&&(0,a.jsx)("div",{className:"text-center py-12 text-dugout-500 dark:text-dugout-400",children:"No players match your filters"})]}):(0,a.jsx)(B,{rankings:s,tierNames:u,onReorder:V,onRemove:H,onChangeTier:U,onUpdateTierNames:_,isLoading:f})})]})}function L(e){var t;let{player:s,rank:r,isExpanded:n,onToggle:l,tierNames:i,onAddToRankings:o,onToggleNotInterested:d}=e,p=["SP","RP","CL"].includes(s.position);return(0,a.jsxs)("div",{className:(0,m.cn)("card overflow-hidden transition-all",s.isDrafted&&"opacity-50",s.isNotInterested&&"opacity-40"),children:[(0,a.jsxs)("div",{onClick:l,className:"flex items-center gap-4 p-4 cursor-pointer hover:bg-dugout-50 dark:hover:bg-dugout-800/50",children:[(0,a.jsx)("div",{className:(0,m.cn)("h-12 w-1 rounded-full",(e=>{switch(e){case"Elite":return"tier-indicator-elite";case"Very Good":return"tier-indicator-verygood";case"Good":return"tier-indicator-good";case"Average":return"tier-indicator-average";default:return"tier-indicator-filler"}})(s.tier))}),(0,a.jsx)("div",{className:"w-8 text-center",children:(0,a.jsxs)("span",{className:"text-lg font-bold text-dugout-400",children:["#",r]})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:(0,m.cn)("font-semibold",s.isNotInterested?"text-dugout-500 line-through":"text-dugout-900 dark:text-white"),children:s.name}),s.nickname&&(0,a.jsxs)("span",{className:"text-sm text-dugout-500",children:['"',s.nickname,'"']}),s.isSleeper&&(0,a.jsxs)("span",{className:"badge-sleeper",children:[(0,a.jsx)(c.Z,{className:"w-3 h-3 mr-1"}),"Sleeper"]}),s.isTwoWay&&(0,a.jsx)("span",{className:"badge bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",children:"Two-Way"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-dugout-500 dark:text-dugout-400",children:[(0,a.jsx)("span",{className:"font-medium",children:p?"".concat("L"===s.throws?"LHP":"RHP"," (").concat(s.position,")"):s.position}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Age ",s.age]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:s.highSchoolClass}),!p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Bats: ",s.bats]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-dugout-400 text-xs",children:"OVR/POT"}),(0,a.jsxs)("div",{className:"font-bold text-dugout-900 dark:text-white",children:[s.overall,"/",s.potential]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-dugout-400 text-xs",children:"Score"}),(0,a.jsx)("div",{className:"font-bold text-dugout-900 dark:text-white",children:null===(t=s.compositeScore)||void 0===t?void 0:t.toFixed(1)})]}),(0,a.jsxs)("div",{className:"text-center min-w-[80px]",children:[(0,a.jsx)("div",{className:"text-dugout-400 text-xs",children:"Demand"}),(0,a.jsx)("div",{className:"font-medium text-dugout-700 dark:text-dugout-300",children:s.demandAmount||"N/A"})]})]}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center gap-1 flex-wrap max-w-[200px]",children:[s.archetypes.slice(0,2).map(e=>(0,a.jsx)("span",{className:"badge bg-dugout-100 dark:bg-dugout-800 text-dugout-600 dark:text-dugout-400 text-xs",children:e},e)),s.archetypes.length>2&&(0,a.jsxs)("span",{className:"text-xs text-dugout-400",children:["+",s.archetypes.length-2]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[s.redFlags.length>0&&(0,a.jsx)("span",{className:"text-redFlag",title:s.redFlags.join(", "),children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),s.greenFlags.length>0&&(0,a.jsx)("span",{className:"text-greenFlag",title:s.greenFlags.join(", "),children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]}),s.isDrafted&&(0,a.jsxs)("div",{className:"text-sm text-dugout-500",children:["Drafted: R",s.draftRound,", P",s.draftPick]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[!s.isDrafted&&!s.isNotInterested&&(0,a.jsx)(b,{playerId:s.id,tierNames:i,onAdd:o,isInRankings:!!s.ranking}),(0,a.jsx)(v,{playerId:s.id,isNotInterested:s.isNotInterested,onToggle:d})]}),(0,a.jsx)("div",{className:"text-dugout-400",children:n?(0,a.jsx)(x.Z,{className:"w-5 h-5"}):(0,a.jsx)(h.Z,{className:"w-5 h-5"})})]}),n&&(0,a.jsx)("div",{className:"border-t border-dugout-200 dark:border-dugout-700 p-4 bg-dugout-50 dark:bg-dugout-800/30",children:(0,a.jsx)("div",{className:"text-sm text-dugout-500",children:"Expanded player details here (ratings, background, etc.)"})})]})}},9354:function(e,t,s){"use strict";s.d(t,{Ci:function(){return i},Dx:function(){return l},cn:function(){return n}});var a=s(4839),r=s(6164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function l(e){switch(e){case"Elite":return"text-elite bg-elite/10 border-elite";case"Very Good":return"text-veryGood bg-veryGood/10 border-veryGood";case"Good":return"text-good bg-good/10 border-good";case"Average":return"text-average bg-average/10 border-average";case"Filler":return"text-filler bg-filler/10 border-filler";default:return"text-dugout-400 bg-dugout-100 border-dugout-300"}}function i(e){let t={positions:[],minPotential:null,maxPotential:null,minOverall:null,maxOverall:null,tiers:[],archetypes:[],showDrafted:!1,showSleepersOnly:!1,showTwoWayOnly:!1,collegeOnly:!1,hsOnly:!1,maxDemand:null,throws:null,bats:null},s=e.toLowerCase();for(let[e,a]of Object.entries({catcher:"C",c:"C","first base":"1B","1b":"1B","first baseman":"1B","second base":"2B","2b":"2B","second baseman":"2B","third base":"3B","3b":"3B","third baseman":"3B",shortstop:"SS",ss:"SS",short:"SS","left field":"LF",lf:"LF","left fielder":"LF","center field":"CF",cf:"CF","center fielder":"CF","right field":"RF",rf:"RF","right fielder":"RF","starting pitcher":"SP",sp:"SP",starter:"SP",starters:"SP","relief pitcher":"RP",rp:"RP",reliever:"RP",relievers:"RP",closer:"CL",cl:"CL",closers:"CL",pitcher:"SP",pitchers:"SP",outfielder:"OF",outfielders:"OF",of:"OF",infielder:"IF",infielders:"IF",if:"IF"}))s.includes(e)&&("OF"===a?t.positions.push("LF","CF","RF"):"IF"===a?t.positions.push("2B","3B","SS"):t.positions.push(a));t.positions=Array.from(new Set(t.positions));let a=s.match(/(\d+)\+?\s*pot(ential)?/);a&&(t.minPotential=parseInt(a[1],10));let r=s.match(/(\d+)\+?\s*ov(r|erall)?/);for(let e of(r&&(t.minOverall=parseInt(r[1],10)),s.includes("elite")&&t.tiers.push("Elite"),s.includes("very good")&&t.tiers.push("Very Good"),s.includes("good")&&!s.includes("very good")&&t.tiers.push("Good"),s.includes("average")&&t.tiers.push("Average"),s.includes("filler")&&t.tiers.push("Filler"),["power bat","contact hitter","five-tool","five tool","toolsy","defensive ss","defensive c","speed threat","patient hitter","raw power","utility","glove-first","glove first","balanced","ace","mid-rotation","mid rotation","back-end","back end","power arm","groundball","ground ball","strikeout","control pitcher","closer material","fastball-only","fastball only","elite arsenal","sidearmer"]))if(s.includes(e)){let s={"power bat":"Power Bat","contact hitter":"Contact Hitter","five-tool":"Five-Tool Player","five tool":"Five-Tool Player",toolsy:"Toolsy OF","defensive ss":"Defensive SS","defensive c":"Defensive C","speed threat":"Speed Threat","patient hitter":"Patient Hitter","raw power":"Raw Power",utility:"Utility Player","glove-first":"Glove-First","glove first":"Glove-First",balanced:"Balanced Hitter",ace:"Ace Potential","mid-rotation":"Mid-Rotation Starter","mid rotation":"Mid-Rotation Starter","back-end":"Back-End Starter","back end":"Back-End Starter","power arm":"Power Arm",groundball:"Groundball Specialist","ground ball":"Groundball Specialist",strikeout:"Strikeout Artist","control pitcher":"Control Pitcher","closer material":"Closer Material","fastball-only":"Fastball-Only","fastball only":"Fastball-Only","elite arsenal":"Elite Arsenal",sidearmer:"Sidearmer"};s[e]&&t.archetypes.push(s[e])}(s.includes("available")||s.includes("undrafted"))&&(t.showDrafted=!1),s.includes("drafted")&&(t.showDrafted=!0),s.includes("sleeper")&&(t.showSleepersOnly=!0),(s.includes("two-way")||s.includes("two way"))&&(t.showTwoWayOnly=!0),(s.includes("college")||s.includes("co "))&&(t.collegeOnly=!0),(s.includes("high school")||s.includes("hs ")||s.includes(" hs"))&&(t.hsOnly=!0),(s.includes("left handed")||s.includes("left-handed")||s.includes("lefty")||s.includes("lhp"))&&(s.includes("pitcher")||s.includes("sp")||s.includes("lhp")?t.throws="L":t.bats="L"),(s.includes("right handed")||s.includes("right-handed")||s.includes("righty")||s.includes("rhp"))&&(s.includes("pitcher")||s.includes("sp")||s.includes("rhp")?t.throws="R":t.bats="R"),s.includes("switch")&&(t.bats="S");let n=s.match(/under\s*\$?([\d.]+)\s*(m|k)?/i);if(n){var l,i;let e=parseFloat(n[1]);(null===(l=n[2])||void 0===l?void 0:l.toLowerCase())==="m"?e*=1e6:(null===(i=n[2])||void 0===i?void 0:i.toLowerCase())==="k"&&(e*=1e3),t.maxDemand=e}return t}},4451:function(e,t,s){"use strict";s.d(t,{MZ:function(){return l},ae:function(){return r},kd:function(){return n},si:function(){return a}});let a={1:"Must Have",2:"Priority",3:"Target",4:"Value",5:"Flier"},r={name:"Default",description:"Balanced approach",isActive:!0,isPreset:!1,potentialWeight:50,overallWeight:20,riskWeight:15,signabilityWeight:15,collegeVsHS:"neutral",collegeHSBonus:5,preferredBatterTypes:[],batterTypeBonus:5,preferredPitcherTypes:[],pitcherTypeBonus:5,priorityPositions:[],positionBonus:10,useBabipKs:!1,batterWeights:{power:25,contact:25,babip:0,avoidK:0,eye:20,gap:15,speed:10,defense:5},useMovementSP:!1,spWeights:{stuff:25,movement:0,control:20,pBabip:15,hrRate:15,stamina:20,arsenal:5},useMovementRP:!1,rpWeights:{stuff:30,movement:0,control:20,pBabip:20,hrRate:20,arsenal:10},tierThresholds:{elite:80,veryGood:65,good:50,average:35}};r.potentialWeight,r.overallWeight,r.riskWeight,r.signabilityWeight,r.collegeVsHS,r.collegeHSBonus,r.preferredBatterTypes,r.batterTypeBonus,r.preferredPitcherTypes,r.pitcherTypeBonus,r.priorityPositions,r.positionBonus,r.useBabipKs,r.batterWeights,r.useMovementSP,r.spWeights,r.useMovementRP,r.rpWeights,r.tierThresholds;let n=["C","1B","2B","3B","SS","LF","CF","RF","SP","RP","CL"],l={positions:[],minPotential:null,maxPotential:null,minOverall:null,maxOverall:null,tiers:[],archetypes:[],showDrafted:!1,showSleepersOnly:!1,showTwoWayOnly:!1,showNotInterested:!1,collegeOnly:!1,hsOnly:!1,maxDemand:null,searchQuery:""}}},function(e){e.O(0,[998,397,737,971,23,744],function(){return e(e.s=4884)}),_N_E=e.O()}]);